<nav class="navbar">
  <div class="navbar-container">
    <!-- Logo -->
    <div class="navbar-brand" routerLink="/dashboard">
      <img 
        src="images/logo-reduzido.png" 
        alt="Logo" 
        class="logo-image"
      />
    </div>

    <!-- Menu Desktop -->
    <div class="navbar-menu">
      <a routerLink="/dashboard" routerLinkActive="active" class="menu-item">
        <i class="fas fa-th-large"></i>
        <span>Dashboard</span>
      </a>

      <a routerLink="/pacientes" routerLinkActive="active" class="menu-item">
        <i class="fas fa-users"></i>
        <span>Pacientes</span>
      </a>

      <a routerLink="/consultas" routerLinkActive="active" class="menu-item">
        <i class="fas fa-file-alt"></i>
        <span>Consultas</span>
      </a>
    </div>

    <!-- User Menu -->
    <div class="navbar-user">
      <div class="user-info" (click)="toggleUserMenu()" [class.active]="userMenuOpen">
        <div class="user-avatar">
          <span>{{ getUserInitials() }}</span>
          @if (currentUser?.perfil === 'admin') {
            <div class="admin-badge">
              <i class="fas fa-star"></i>
            </div>
          }
        </div>
        <div class="user-details">
          <span class="user-name">{{ currentUser?.name || 'Usuário' }}</span>
          <span class="user-role">{{ currentUser?.perfil === 'admin' ? 'Administrador' : 'Usuário' }}</span>
        </div>
        <svg class="dropdown-arrow" [class.rotated]="userMenuOpen" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <polyline points="6 9 12 15 18 9"></polyline>
        </svg>
      </div>

      <!-- User Dropdown Menu -->
      <div class="user-dropdown" [class.open]="userMenuOpen">
        <div class="dropdown-header">
          <div class="dropdown-avatar">
            <span>{{ getUserInitials() }}</span>
          </div>
          <div class="dropdown-user-info">
            <div class="dropdown-name">{{ currentUser?.name || 'Usuário' }}</div>
            <div class="dropdown-email">{{ currentUser?.email || '' }}</div>
            <div class="dropdown-role">{{ currentUser?.perfil === 'admin' ? 'Administrador' : 'Usuário' }}</div>
          </div>
        </div>

        <div class="dropdown-divider"></div>

        <button class="dropdown-item" (click)="navigateToProfile()">
          <i class="fas fa-user"></i>
          <span>Meu Perfil</span>
        </button>

        <button class="dropdown-item" (click)="navigateToSettings()">
          <i class="fas fa-cog"></i>
          <span>Configurações</span>
        </button>

        <div class="dropdown-divider"></div>

        <button class="dropdown-item logout-item" (click)="logout()">
          <i class="fas fa-sign-out-alt"></i>
          <span>Sair</span>
        </button>
      </div>
    </div>

    <!-- Botão Mobile -->
    <button class="mobile-menu-button" (click)="toggleMenu()" [attr.aria-expanded]="menuAberto">
      @if (!menuAberto) {
        <i class="fas fa-bars"></i>
      }
      @if (menuAberto) {
        <i class="fas fa-times"></i>
      }
    </button>
  </div>

  <!-- Menu Mobile -->
  <div class="mobile-menu" [class.open]="menuAberto">
    <div class="mobile-menu-content">
      <a routerLink="/dashboard" routerLinkActive="active" class="mobile-menu-item" (click)="fecharMenu()">
        <i class="fas fa-th-large"></i>
        <span>Dashboard</span>
      </a>

      <a routerLink="/pacientes" routerLinkActive="active" class="mobile-menu-item" (click)="fecharMenu()">
        <i class="fas fa-users"></i>
        <span>Pacientes</span>
      </a>

      <a routerLink="/consultas" routerLinkActive="active" class="mobile-menu-item" (click)="fecharMenu()">
        <i class="fas fa-file-alt"></i>
        <span>Consultas</span>
      </a>

      <div class="mobile-menu-divider"></div>

      <div class="mobile-user-info">
        <div class="user-avatar">
          <span>{{ getUserInitials() }}</span>
          @if (currentUser?.perfil === 'admin') {
            <div class="admin-badge">
              <i class="fas fa-star"></i>
            </div>
          }
        </div>
        <div class="user-details">
          <span class="user-name">{{ currentUser?.name || 'Usuário' }}</span>
          <span class="user-role">{{ currentUser?.perfil === 'admin' ? 'Administrador' : 'Usuário' }}</span>
        </div>
      </div>

      <button class="mobile-menu-item" (click)="navigateToProfile(); fecharMenu()">
        <i class="fas fa-user"></i>
        <span>Meu Perfil</span>
      </button>

      <button class="mobile-menu-item" (click)="navigateToSettings(); fecharMenu()">
        <i class="fas fa-cog"></i>
        <span>Configurações</span>
      </button>

      <div class="mobile-menu-divider"></div>

      <button class="mobile-menu-item logout-button" (click)="logout()">
        <i class="fas fa-sign-out-alt"></i>
        <span>Sair</span>
      </button>
    </div>
  </div>
</nav>
