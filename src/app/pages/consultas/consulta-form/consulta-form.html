<div class="consulta-container">
  <div class="consulta-header">
    <button class="back-button" (click)="cancelar()">
      <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <polyline points="15 18 9 12 15 6"></polyline>
      </svg>
    </button>
    <div class="header-content">
      <h1 class="page-title">Nova Consulta - {{ pacienteNome }}</h1>
      <p class="page-subtitle">Preencha os dados da consulta</p>
    </div>
  </div>

  <!-- Tabs -->
  <div class="tabs-container">
    <button 
      class="tab-button"
      [class.active]="activeTab === 'estilo-vida'"
      (click)="setActiveTab('estilo-vida')">
      <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
        <circle cx="12" cy="7" r="4"></circle>
      </svg>
      Estilo de Vida
    </button>
    <button 
      class="tab-button"
      [class.active]="activeTab === 'medidas'"
      (click)="setActiveTab('medidas')">
      <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <polyline points="22 12 18 12 15 21 9 3 6 12 2 12"></polyline>
      </svg>
      Medidas
    </button>
    <button 
      class="tab-button"
      [class.active]="activeTab === 'fotos'"
      (click)="setActiveTab('fotos')">
      <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
        <circle cx="9" cy="9" r="2"></circle>
        <path d="m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"></path>
      </svg>
      Fotos
    </button>
    <button 
      class="tab-button"
      [class.active]="activeTab === 'dieta'"
      (click)="setActiveTab('dieta')">
      <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <circle cx="12" cy="12" r="10"></circle>
        <path d="M12 6v6l4 2"></path>
      </svg>
      Dieta
    </button>
  </div>

  <!-- Tab: Estilo de Vida -->
  <div class="tab-content" *ngIf="activeTab === 'estilo-vida'">
    <form [formGroup]="estiloVidaForm">
      <div class="content-card">
        <h2 class="section-title">Rotina e Objetivos</h2>
        <div class="form-row">
          <div class="form-group">
            <label class="form-label">Objetivo <span class="required">*</span></label>
            <select formControlName="objetivo" class="form-input">
              <option value="">Selecione...</option>
              <option *ngFor="let obj of objetivos" [value]="obj">{{ obj }}</option>
            </select>
          </div>
          <div class="form-group">
            <label class="form-label">Frequência de Treino <span class="required">*</span></label>
            <select formControlName="frequenciaTreino" class="form-input">
              <option value="">Selecione...</option>
              <option *ngFor="let freq of frequenciasTreino" [value]="freq">{{ freq }}</option>
            </select>
          </div>
          <div class="form-group">
            <label class="form-label">Duração do Treino</label>
            <input type="text" formControlName="tempoTreino" class="form-input" placeholder="Ex: 1 hora">
          </div>
        </div>
      </div>

      <div class="content-card">
        <h2 class="section-title">Histórico de Saúde</h2>
        <div class="form-row">
          <div class="form-group">
            <label class="form-label">Cirurgias</label>
            <textarea formControlName="cirurgias" class="form-textarea" rows="2" placeholder="Descreva ou 'Nenhuma'"></textarea>
          </div>
          <div class="form-group">
            <label class="form-label">Doenças</label>
            <textarea formControlName="doencas" class="form-textarea" rows="2" placeholder="Descreva ou 'Nenhuma'"></textarea>
          </div>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label class="form-label">Histórico Familiar</label>
            <textarea formControlName="historicoFamiliar" class="form-textarea" rows="2" placeholder="Diabetes, hipertensão, etc."></textarea>
          </div>
          <div class="form-group">
            <label class="form-label">Medicamentos em Uso</label>
            <textarea formControlName="medicamentos" class="form-textarea" rows="2" placeholder="Liste os medicamentos"></textarea>
          </div>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label class="form-label">Suplementos</label>
            <textarea formControlName="suplementos" class="form-textarea" rows="2" placeholder="Whey, creatina, etc."></textarea>
          </div>
          <div class="form-group">
            <label class="form-label">Uso de Anabolizantes <span class="required">*</span></label>
            <select formControlName="usoAnabolizantes" class="form-input">
              <option value="">Selecione...</option>
              <option *ngFor="let uso of usoAnabolizantes" [value]="uso">{{ uso }}</option>
            </select>
          </div>
        </div>
      </div>

      <div class="content-card">
        <h2 class="section-title">Hábitos</h2>
        <div class="form-row">
          <div class="form-group">
            <label class="form-label">Tabagismo <span class="required">*</span></label>
            <select formControlName="fuma" class="form-input">
              <option [value]="false">Não fuma</option>
              <option [value]="true">Fuma</option>
            </select>
          </div>
          <div class="form-group">
            <label class="form-label">Consumo de Álcool <span class="required">*</span></label>
            <select formControlName="frequenciaAlcool" class="form-input">
              <option value="">Selecione...</option>
              <option *ngFor="let freq of consumoAlcool" [value]="freq">{{ freq }}</option>
            </select>
          </div>
          <div class="form-group">
            <label class="form-label">Funcionamento Intestinal <span class="required">*</span></label>
            <select formControlName="funcionamentoIntestino" class="form-input">
              <option value="">Selecione...</option>
              <option *ngFor="let func of funcionamentoIntestino" [value]="func">{{ func }}</option>
            </select>
          </div>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label class="form-label">Qualidade do Sono</label>
            <input type="text" formControlName="qualidadeSono" class="form-input" placeholder="Ex: 7-8 horas">
          </div>
          <div class="form-group">
            <label class="form-label">Ingestão de Água</label>
            <input type="text" formControlName="ingestaoAguaDiaria" class="form-input" placeholder="Ex: 2L por dia">
          </div>
          <div class="form-group">
            <label class="form-label">Pressão Arterial</label>
            <input type="text" formControlName="pressaoArterial" class="form-input" placeholder="Ex: 120/80">
          </div>
        </div>
      </div>

      <div class="content-card">
        <h2 class="section-title">Preferências Alimentares</h2>
        <div class="form-row">
          <div class="form-group">
            <label class="form-label">Alimentos que não gosta</label>
            <textarea formControlName="alimentosNaoGosta" class="form-textarea" rows="3" placeholder="Liste os alimentos"></textarea>
          </div>
          <div class="form-group">
            <label class="form-label">Frutas preferidas</label>
            <textarea formControlName="frutasPreferidas" class="form-textarea" rows="3" placeholder="Liste as frutas"></textarea>
          </div>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label class="form-label">Número de refeições desejadas <span class="required">*</span></label>
            <select formControlName="numeroRefeicoesDesejadas" class="form-input">
              <option value="">Selecione...</option>
              <option *ngFor="let num of numeroRefeicoes" [value]="num">{{ num }} refeições</option>
            </select>
          </div>
          <div class="form-group">
            <label class="form-label">Horário de maior fome <span class="required">*</span></label>
            <select formControlName="horarioMaiorFome" class="form-input">
              <option value="">Selecione...</option>
              <option *ngFor="let hora of horariosFome" [value]="hora">{{ hora }}</option>
            </select>
          </div>
        </div>
        <div class="form-row">
          <div class="form-group full-width">
            <label class="form-label">Intolerâncias e Alergias</label>
            <textarea formControlName="intolerancias" class="form-textarea" rows="2" placeholder="Lactose, glúten, frutos do mar, etc."></textarea>
          </div>
        </div>
      </div>
    </form>
  </div>

  <!-- Tab: Medidas -->
  <div class="tab-content" *ngIf="activeTab === 'medidas'">
    <form [formGroup]="medidasForm">
      <div class="content-card">
        <h2 class="section-title">Composição Corporal</h2>
        <div class="form-row">
          <div class="form-group">
            <label class="form-label">Peso Atual (kg) <span class="required">*</span></label>
            <input type="number" step="0.1" formControlName="pesoAtual" class="form-input" placeholder="Ex: 75.5">
          </div>
          <div class="form-group">
            <label class="form-label">Massa Magra (kg)</label>
            <input type="number" step="0.1" formControlName="massaMagra" class="form-input" placeholder="Ex: 55.0">
          </div>
          <div class="form-group">
            <label class="form-label">Massa Gorda (kg)</label>
            <input type="number" step="0.1" formControlName="massaGorda" class="form-input" placeholder="Ex: 20.5">
          </div>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label class="form-label">Percentual de Gordura (%)</label>
            <input type="number" step="0.1" formControlName="percentualGordura" class="form-input" placeholder="Ex: 25.5">
          </div>
          <div class="form-group">
            <label class="form-label">IMC</label>
            <input type="number" step="0.1" formControlName="imc" class="form-input" placeholder="Ex: 24.8">
          </div>
        </div>
      </div>

      <div class="content-card">
        <h2 class="section-title">Perímetros (cm)</h2>
        <div class="form-row">
          <div class="form-group">
            <label class="form-label">Ombro</label>
            <input type="number" step="0.1" formControlName="perimetroOmbro" class="form-input" placeholder="cm">
          </div>
          <div class="form-group">
            <label class="form-label">Tórax</label>
            <input type="number" step="0.1" formControlName="perimetroTorax" class="form-input" placeholder="cm">
          </div>
          <div class="form-group">
            <label class="form-label">Cintura</label>
            <input type="number" step="0.1" formControlName="perimetroCintura" class="form-input" placeholder="cm">
          </div>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label class="form-label">Abdominal</label>
            <input type="number" step="0.1" formControlName="perimetroAbdominal" class="form-input" placeholder="cm">
          </div>
          <div class="form-group">
            <label class="form-label">Quadril</label>
            <input type="number" step="0.1" formControlName="perimetroQuadril" class="form-input" placeholder="cm">
          </div>
        </div>
        <h3 class="subsection-title">Braços</h3>
        <div class="form-row">
          <div class="form-group">
            <label class="form-label">Braço D (relaxado)</label>
            <input type="number" step="0.1" formControlName="perimetroBracoDireitoRelax" class="form-input" placeholder="cm">
          </div>
          <div class="form-group">
            <label class="form-label">Braço D (contraído)</label>
            <input type="number" step="0.1" formControlName="perimetroBracoDireitoContr" class="form-input" placeholder="cm">
          </div>
          <div class="form-group">
            <label class="form-label">Braço E (relaxado)</label>
            <input type="number" step="0.1" formControlName="perimetroBracoEsquerdoRelax" class="form-input" placeholder="cm">
          </div>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label class="form-label">Braço E (contraído)</label>
            <input type="number" step="0.1" formControlName="perimetroBracoEsquerdoContr" class="form-input" placeholder="cm">
          </div>
          <div class="form-group">
            <label class="form-label">Antebraço D</label>
            <input type="number" step="0.1" formControlName="perimetroAntebracoDireito" class="form-input" placeholder="cm">
          </div>
          <div class="form-group">
            <label class="form-label">Antebraço E</label>
            <input type="number" step="0.1" formControlName="perimetroAntebracoEsquerdo" class="form-input" placeholder="cm">
          </div>
        </div>
        <h3 class="subsection-title">Pernas</h3>
        <div class="form-row">
          <div class="form-group">
            <label class="form-label">Coxa D</label>
            <input type="number" step="0.1" formControlName="perimetroCoxaDireita" class="form-input" placeholder="cm">
          </div>
          <div class="form-group">
            <label class="form-label">Coxa E</label>
            <input type="number" step="0.1" formControlName="perimetroCoxaEsquerda" class="form-input" placeholder="cm">
          </div>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label class="form-label">Panturrilha D</label>
            <input type="number" step="0.1" formControlName="perimetroPanturrilhaDireita" class="form-input" placeholder="cm">
          </div>
          <div class="form-group">
            <label class="form-label">Panturrilha E</label>
            <input type="number" step="0.1" formControlName="perimetroPanturrilhaEsquerda" class="form-input" placeholder="cm">
          </div>
        </div>
      </div>

      <div class="content-card">
        <h2 class="section-title">Dobras Cutâneas (mm)</h2>
        <div class="form-row">
          <div class="form-group">
            <label class="form-label">Tríceps</label>
            <input type="number" step="0.1" formControlName="dobraTriceps" class="form-input" placeholder="mm">
          </div>
          <div class="form-group">
            <label class="form-label">Peitoral</label>
            <input type="number" step="0.1" formControlName="dobraPeito" class="form-input" placeholder="mm">
          </div>
          <div class="form-group">
            <label class="form-label">Axilar Média</label>
            <input type="number" step="0.1" formControlName="dobraAxilarMedia" class="form-input" placeholder="mm">
          </div>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label class="form-label">Subescapular</label>
            <input type="number" step="0.1" formControlName="dobraSubescapular" class="form-input" placeholder="mm">
          </div>
          <div class="form-group">
            <label class="form-label">Abdominal</label>
            <input type="number" step="0.1" formControlName="dobraAbdominal" class="form-input" placeholder="mm">
          </div>
          <div class="form-group">
            <label class="form-label">Supra-ilíaca</label>
            <input type="number" step="0.1" formControlName="dobraSupraIliaca" class="form-input" placeholder="mm">
          </div>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label class="form-label">Coxa</label>
            <input type="number" step="0.1" formControlName="dobraCoxa" class="form-input" placeholder="mm">
          </div>
        </div>
      </div>
    </form>
  </div>

  <!-- Tab: Fotos -->
  <div class="tab-content" *ngIf="activeTab === 'fotos'">
    <div class="content-card">
      <h2 class="section-title">Registro Fotográfico</h2>
      <p class="section-description">Faça upload das fotos do paciente para acompanhamento visual da evolução</p>
      
      <div class="fotos-grid">
        <div class="foto-upload-card">
          <div class="upload-placeholder">
            <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
              <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
              <circle cx="9" cy="9" r="2"></circle>
              <path d="m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"></path>
            </svg>
            <span class="upload-label">Foto Anterior</span>
            <button class="upload-button">Fazer Upload</button>
          </div>
        </div>

        <div class="foto-upload-card">
          <div class="upload-placeholder">
            <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
              <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
              <circle cx="9" cy="9" r="2"></circle>
              <path d="m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"></path>
            </svg>
            <span class="upload-label">Foto Posterior</span>
            <button class="upload-button">Fazer Upload</button>
          </div>
        </div>

        <div class="foto-upload-card">
          <div class="upload-placeholder">
            <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
              <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
              <circle cx="9" cy="9" r="2"></circle>
              <path d="m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"></path>
            </svg>
            <span class="upload-label">Foto Lateral Esquerda</span>
            <button class="upload-button">Fazer Upload</button>
          </div>
        </div>

        <div class="foto-upload-card">
          <div class="upload-placeholder">
            <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
              <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
              <circle cx="9" cy="9" r="2"></circle>
              <path d="m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"></path>
            </svg>
            <span class="upload-label">Foto Lateral Direita</span>
            <button class="upload-button">Fazer Upload</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Tab: Dieta -->
  <div class="tab-content" *ngIf="activeTab === 'dieta'">
    <div class="content-card">
      <h2 class="section-title">Plano Alimentar</h2>
      <p class="section-description">Esta funcionalidade será implementada em breve</p>
      <div class="coming-soon">
        <svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
          <circle cx="12" cy="12" r="10"></circle>
          <path d="M12 6v6l4 2"></path>
        </svg>
        <p>Em desenvolvimento</p>
      </div>
    </div>
  </div>

  <!-- Ações do formulário -->
  <div class="form-actions">
    <button type="button" class="btn-secondary" (click)="cancelar()">Cancelar</button>
    <button type="button" class="btn-primary" (click)="onSubmit()">
      <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"></path>
        <polyline points="17 21 17 13 7 13 7 21"></polyline>
        <polyline points="7 3 7 8 15 8"></polyline>
      </svg>
      Salvar Consulta
    </button>
  </div>
</div>